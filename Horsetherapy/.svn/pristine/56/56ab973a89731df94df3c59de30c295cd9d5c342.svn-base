package sepm.ss13.e0828.service;

import sepm.ss13.e0828.domain.Horse;
import sepm.ss13.e0828.domain.HorseQueryData;
import sepm.ss13.e0828.domain.Horse.Therapytype;

/** This is a helper class that has the task to validate
 * every object that has to do with the Horse entity. This
 * includes creation, deletion and updating
 * @author Maurizio Rinder u0828852
 */
public class HorseValidator extends AbstractValidator{

	/** Validates if horse is valid for adding it to the persistence
	 * unite
	 * @param vHorse the horse that is going to be validated
	 * @return returns true if the Horse is valid, false otherwise
	 */
	public boolean validateHorse(Horse vHorse){
		boolean horsevalid = true;
		
		if( vHorse == null ) return (horsevalid = false);

		String horsePhoto = vHorse.getHorsePhoto();
		String horseName = vHorse.getHorseName();
		float horseTherapyprice = vHorse.getHorseTherapyprice();
		Therapytype horseTherapytype = vHorse.getHorseTherapytype();
		
		horsevalid = !isStringEmpty(horsePhoto) && !isStringEmpty(horseName) && 
				isLegalPrice(horseTherapyprice) && !isTherapytypeEmpty(horseTherapytype);
				
		return horsevalid;		
	}
	
	/** Checks wether there is at least one value included that can be updated
	 * 
	 * @param queryValues the querydata for the update. This object is going to be validated.
	 * @return returns true if object is valid, false otherwise
	 */
	public boolean validateHorseupdate(HorseQueryData queryValues){
		boolean validQuery = false;
		
		if( queryValues == null ) return (validQuery = false);
		if( queryValues.getHorseID() < 0) return (validQuery = false);
		
 		Object[] vals = queryValues.getValues();
	
		for( int i = 0; i < vals.length; i++ ){			
			if( vals[i] != null ) return (validQuery = true);
		}
		
		return validQuery;
	}
	/** Checks if the the values needed for deleting the horse are given
	 * 
	 * @param delValues the data for the deletion. This object is going to be validated.
	 * @return returns true if object is valid which means that there is at least a valid id, false otherwise
	 */
	public boolean validateHorsedelete(HorseQueryData delValues){
		if( delValues == null ) return false;
		return !(delValues.getHorseID() < 0);
	}
	/** Checks if the the values needed for selecting the horses by therapytype are valid
	 * 
	 * @param therapyType the data for the selection. This object is going to be validated.
	 * @return returns true if object is valid which means that there is at least the therapytype, false otherwise
	 */
	public boolean validateHorseTherapySelection(HorseQueryData therapyType) {
		if( therapyType == null ) return false;
		String therapy = therapyType.getTherapytype(); 
		return !isStringEmpty(therapy);
	}
	
	private boolean isTherapytypeEmpty( Therapytype type ){
		return type == null;
	}
}
